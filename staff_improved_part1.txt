<!DOCTYPE html>
<html lang="en" class="dark">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
 <title>Just Vitality Clinic</title>
 <script src="https://cdn.tailwindcss.com"></script>
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 <!-- IMPROVED: Better fonts -->
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
 <script>
  tailwind.config = {
   darkMode: 'class',
   theme: {
    extend: {
     fontFamily: {
      'display': ['Plus Jakarta Sans', 'sans-serif'],
      'body': ['Inter', 'sans-serif'],
      'mono': ['JetBrains Mono', 'monospace']
     },
     colors: { 
      primary: { 400: '#60a5fa', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8' },
      emerald: { 400: '#34d399', 500: '#10b981', 600: '#059669' },
      violet: { 400: '#a78bfa', 500: '#8b5cf6', 600: '#7c3aed' }
     },
     boxShadow: {
      'glow': '0 0 30px rgba(59, 130, 246, 0.4)',
      'glow-green': '0 0 30px rgba(16, 185, 129, 0.4)',
      'glow-purple': '0 0 30px rgba(139, 92, 246, 0.4)',
      'inner-lg': 'inset 0 2px 10px rgba(0, 0, 0, 0.3)'
     },
     animation: {
      'fade-in': 'fadeIn 0.4s ease-out forwards',
      'slide-up': 'slideUp 0.4s ease-out forwards',
      'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite'
     }
    }
   }
  }
 </script>
 <style>
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

  :root {
   --bg-body: #f3f4f6; --bg-panel: #ffffff; --border-color: #e5e7eb;
   --text-main: #111827; --text-muted: #6b7280; --sidebar-bg: #ffffff;
  }
  .dark {
   --bg-body: #020617; --bg-panel: rgba(15, 23, 42, 0.8); --border-color: rgba(51, 65, 85, 0.5);
   --text-main: #f1f5f9; --text-muted: #94a3b8; --sidebar-bg: rgba(15, 23, 42, 0.95);
  }
  
  html { scroll-behavior: smooth; }
  body { 
   background-color: var(--bg-body); 
   color: var(--text-main); 
   font-family: 'Inter', sans-serif; 
   transition: background-color 0.3s, color 0.3s;
   letter-spacing: -0.01em;
  }
  @media (min-width: 769px) { body { overflow: hidden; } }
  
  h1, h2, h3, h4, h5, h6 { font-family: 'Plus Jakarta Sans', sans-serif; letter-spacing: -0.02em; }
  
  /* IMPROVED: Glass Panel with better blur */
  .glass-panel { 
   background: var(--bg-panel); 
   backdrop-filter: blur(16px);
   -webkit-backdrop-filter: blur(16px);
   border: 1px solid var(--border-color); 
   border-radius: 1rem; 
   transition: all 0.3s ease;
   box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  }
  .glass-panel:hover { 
   box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
  }
  
  /* IMPROVED: Better input styling */
  .input-field { 
   background-color: rgba(15, 23, 42, 0.6); 
   border: 1px solid var(--border-color); 
   color: var(--text-main); 
   padding: 0.875rem 1rem; 
   border-radius: 0.75rem; 
   width: 100%; 
   outline: none; 
   transition: all 0.2s ease;
   font-size: 0.95rem;
  }
  .input-field:focus { 
   border-color: #3b82f6; 
   box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
  }
  .input-field::placeholder { color: #64748b; }
  
  /* Sidebar */
  .sidebar { 
   background-color: var(--sidebar-bg); 
   border-right: 1px solid var(--border-color); 
   display: flex; 
   flex-direction: column; 
   z-index: 40;
   backdrop-filter: blur(20px);
   -webkit-backdrop-filter: blur(20px);
  }
  .border-theme { border-color: var(--border-color); }
  
  /* IMPROVED: Better buttons */
  .btn { 
   padding: 0.875rem 1.5rem; 
   border-radius: 0.75rem; 
   font-weight: 600; 
   transition: all 0.2s ease; 
   white-space: nowrap; 
   text-align: center;
   font-family: 'Plus Jakarta Sans', sans-serif;
   letter-spacing: -0.01em;
  }
  .btn:disabled { opacity: 0.4; cursor: not-allowed; filter: grayscale(100%); }
  .btn:not(:disabled):active { transform: scale(0.98); }
  
  .btn-primary { 
   background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); 
   color: white; 
   border: none;
   box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
  }
  .btn-primary:hover:not(:disabled) { 
   transform: translateY(-2px); 
   box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
  }
  
  .btn-secondary { 
   background-color: rgba(51, 65, 85, 0.5); 
   color: var(--text-main);
   border: 1px solid var(--border-color);
  }
  .btn-secondary:hover:not(:disabled) { 
   background-color: rgba(51, 65, 85, 0.8);
   border-color: rgba(100, 116, 139, 0.5);
  }
  
  .btn-success { 
   background: linear-gradient(135deg, #10b981 0%, #059669 100%); 
   color: white; 
   border: none;
   box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
  }
  .btn-success:hover:not(:disabled) { 
   transform: translateY(-2px);
   box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
  }
  
  /* IMPROVED: Scrollbar */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: #475569; }
  
  /* Mobile */
  @media (max-width: 768px) { 
   .sidebar { 
    position: fixed; top: 3.5rem; bottom: 0; left: 0; width: 100%; 
    transform: translateX(-100%); transition: 0.3s ease-in-out; 
    overscroll-behavior: contain;
   } 
   .sidebar.open { transform: translateX(0); box-shadow: 10px 0 30px rgba(0, 0, 0, 0.5); }
   .mobile-btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; width: 100%; }
  }
  @media (min-width: 769px) { 
   .sidebar { width: 360px; } 
   .mobile-btn-grid { display: flex; gap: 0.5rem; }
  }

  .app-footer { padding: 1rem; text-align: center; font-size: 0.7rem; color: var(--text-muted); width: 100%; margin-top: auto; letter-spacing: 0.02em; }
  .app-footer a { color: #3b82f6; text-decoration: none; font-weight: 500; }
  .app-footer a:hover { text-decoration: underline; }

  /* Heatmap */
  #heatmapGrid { display: grid; gap: 3px; }
  .hm-cell {
   border-radius: 6px; height: 32px;
   display: flex; align-items: center; justify-content: center;
   font-size: 10px; font-weight: 600;
   color: transparent; 
   transition: all 0.2s;
  }
  .hm-cell:hover { filter: brightness(1.3); color: white; z-index: 10; cursor: default; transform: scale(1.1); }
  .hm-header { font-size: 10px; font-weight: 700; text-transform: uppercase; text-align: center; padding: 4px; color: var(--text-muted); letter-spacing: 0.05em; }
  
  /* Kiosk touch-friendly */
  .kiosk-touch { min-height: 56px; }
  
  /* Patient list items */
  .patient-item {
   transition: all 0.15s ease;
   border-left: 3px solid transparent;
  }
  .patient-item:hover {
   background: rgba(59, 130, 246, 0.1);
   border-left-color: #3b82f6;
  }
  .patient-item.active {
   background: rgba(59, 130, 246, 0.15);
   border-left-color: #3b82f6;
  }
  
  /* Badge styling */
  .badge {
   font-size: 9px;
   font-weight: 700;
   padding: 2px 6px;
   border-radius: 4px;
   letter-spacing: 0.05em;
   text-transform: uppercase;
  }
  .badge-new { background: rgba(234, 179, 8, 0.2); color: #fbbf24; border: 1px solid rgba(234, 179, 8, 0.3); }
  .badge-queue { background: rgba(59, 130, 246, 0.2); color: #60a5fa; }
  
  /* Print */
  @media print {
   body { background-color: white !important; color: black !important; overflow: visible !important; }
   #viewLauncher, #viewLogin, #viewStaff, #viewKiosk, #messageModal, #modalDeleteConfirm { display: none !important; }
   #viewReports { display: block !important; position: static !important; width: 100% !important; height: auto !important; background-color: white !important; overflow: visible !important; }
   #reportControls, #btnReportExit { display: none !important; }
   .glass-panel { box-shadow: none !important; border: 1px solid #ddd !important; background-color: white !important; color: black !important; page-break-inside: avoid; margin-bottom: 20px; }
   .text-white, .text-gray-400, .text-gray-300 { color: black !important; }
   .hm-cell { color: black !important; border: 1px solid #ccc; font-weight: bold; }
   canvas { max-width: 100% !important; max-height: 400px !important; }
  }
 </style>
</head>
<body onload="initApp()">

 <!-- 1. LAUNCHER (IMPROVED DESIGN) -->
 <div id="viewLauncher" class="fixed inset-0 z-50 flex flex-col overflow-y-auto"
      style="background: linear-gradient(135deg, #020617 0%, #0f172a 50%, #020617 100%);">
  <div class="flex-1 flex flex-col items-center justify-center p-6">
   <div class="max-w-6xl w-full text-center animate-fade-in">
    <h1 class="text-5xl md:text-7xl font-extrabold text-white mb-4 tracking-tight font-display">
     Just Vitality 
     <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-blue-500 to-blue-600">Clinic</span>
    </h1>
    <p class="text-slate-400 mb-16 text-xl tracking-wide font-light">Advanced Clinical Management System</p>
    
    <div class="flex flex-col md:flex-row gap-8 justify-center items-stretch px-4">
     <!-- STAFF -->
     <div id="btnLauncherStaff" onclick="showLogin('STAFF')" 
          class="group relative overflow-hidden rounded-3xl bg-slate-900/60 border border-slate-700/50 p-10 w-full md:w-80 cursor-pointer transition-all duration-500 hover:shadow-glow hover:border-blue-500/50 transform hover:-translate-y-3 backdrop-blur-sm">
      <div class="absolute inset-0 bg-gradient-to-b from-blue-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
      <div class="absolute -top-20 -right-20 w-40 h-40 bg-blue-500/10 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
      <div class="relative z-10 flex flex-col items-center h-full justify-center">
       <div class="p-5 rounded-2xl bg-slate-950/80 mb-6 shadow-inner-lg transition-all duration-300 group-hover:shadow-glow">
        <svg class="w-16 h-16 text-slate-500 group-hover:text-blue-400 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0c0 .884-.956 2-2 2h-1m6 0c1.044 0 2-1.116 2-2"/>
        </svg>
       </div>
       <h2 class="text-2xl font-bold text-white mb-2 font-display">Staff Portal</h2>
       <p class="text-slate-500 text-sm font-medium">Administration & Records</p>
      </div>
     </div>

     <!-- ANALYTICS -->
     <div id="btnLauncherReports" onclick="showLogin('REPORTS')" 
          class="group relative overflow-hidden rounded-3xl bg-slate-900/60 border border-slate-700/50 p-10 w-full md:w-80 cursor-pointer transition-all duration-500 hover:shadow-glow-purple hover:border-violet-500/50 transform hover:-translate-y-3 backdrop-blur-sm">
      <div class="absolute inset-0 bg-gradient-to-b from-violet-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
      <div class="absolute -top-20 -right-20 w-40 h-40 bg-violet-500/10 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
      <div class="relative z-10 flex flex-col items-center h-full justify-center">
       <div class="p-5 rounded-2xl bg-slate-950/80 mb-6 shadow-inner-lg transition-all duration-300 group-hover:shadow-glow-purple">
        <svg class="w-16 h-16 text-slate-500 group-hover:text-violet-400 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
        </svg>
       </div>
       <h2 class="text-2xl font-bold text-white mb-2 font-display">Clinic Analytics</h2>
       <p class="text-slate-500 text-sm font-medium">Business Intelligence</p>
      </div>
     </div>
     
     <!-- KIOSK -->
     <div id="btnLauncherKiosk" onclick="startKiosk()" 
          class="group relative overflow-hidden rounded-3xl bg-slate-900/60 border border-slate-700/50 p-10 w-full md:w-80 cursor-pointer transition-all duration-500 hover:shadow-glow-green hover:border-emerald-500/50 transform hover:-translate-y-3 backdrop-blur-sm">
      <div class="absolute inset-0 bg-gradient-to-b from-emerald-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
      <div class="absolute -top-20 -right-20 w-40 h-40 bg-emerald-500/10 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
      <div class="relative z-10 flex flex-col items-center h-full justify-center">
       <div class="p-5 rounded-2xl bg-slate-950/80 mb-6 shadow-inner-lg transition-all duration-300 group-hover:shadow-glow-green">
        <svg class="w-16 h-16 text-slate-500 group-hover:text-emerald-400 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
       </div>
       <h2 class="text-2xl font-bold text-white mb-2 font-display">Patient Check-In</h2>
       <p class="text-slate-500 text-sm font-medium">Self-Service Registration</p>
      </div>
     </div>
    </div>
   </div>
  </div>
  <div class="app-footer">
   System by <a href="mailto:dyczkowski.kamil@gmail.com">Kamil Dyczkowski</a> 2026 
  </div>
 </div>

 <!-- 2. LOGIN (IMPROVED) -->
 <div id="viewLogin" class="hidden fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex flex-col items-center justify-center p-4">
  <div class="glass-panel p-8 w-full max-w-sm relative animate-slide-up">
   <button onclick="document.getElementById('viewLogin').classList.add('hidden')" 
           class="absolute top-4 right-4 text-slate-500 hover:text-white transition-colors text-2xl">&times;</button>
   <h2 class="text-2xl font-bold mb-8 text-center text-white font-display" id="loginTitle">Staff Access</h2>
   <input type="text" id="loginUser" placeholder="Username" class="input-field mb-4" autocomplete="username">
   <input type="password" id="loginPass" placeholder="Password" class="input-field mb-8" autocomplete="current-password">
   <button onclick="doLogin()" class="btn btn-primary w-full py-4 text-lg">Login</button>
  </div>
  <div class="app-footer mt-8">System by <a href="mailto:dyczkowski.kamil@gmail.com">Kamil Dyczkowski</a> 2026</div>
 </div>
